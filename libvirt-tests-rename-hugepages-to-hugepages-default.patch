From 3a4056d5e68e2b3efc923168575a63f401adf861 Mon Sep 17 00:00:00 2001
Message-Id: <3a4056d5e68e2b3efc923168575a63f401adf861@dist-git>
From: Pavel Hrdina <phrdina@redhat.com>
Date: Mon, 13 Aug 2018 18:16:04 +0200
Subject: [PATCH] tests: rename hugepages to hugepages-default
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Remove unnecessary XML elements as well.

Signed-off-by: Pavel Hrdina <phrdina@redhat.com>
(cherry picked from commit 47b8c6a04af38d38cd5d425b65d052623d1e35ba)

Conflicts:
    tests/qemuxml2argvdata/hugepages-default.args
        - missing upstream commit <caccbba64a>

Resolves: https://bugzilla.redhat.com/show_bug.cgi?id=1591235

Signed-off-by: Pavel Hrdina <phrdina@redhat.com>
Reviewed-by: JÃ¡n Tomko <jtomko@redhat.com>
---
 .../{hugepages.args => hugepages-default.args}              | 2 --
 .../{hugepages.xml => hugepages-default.xml}                | 5 -----
 tests/qemuxml2argvtest.c                                    | 2 +-
 .../{hugepages.xml => hugepages-default.xml}                | 6 ------
 tests/qemuxml2xmltest.c                                     | 2 +-
 5 files changed, 2 insertions(+), 15 deletions(-)
 rename tests/qemuxml2argvdata/{hugepages.args => hugepages-default.args} (82%)
 rename tests/qemuxml2argvdata/{hugepages.xml => hugepages-default.xml} (79%)
 rename tests/qemuxml2xmloutdata/{hugepages.xml => hugepages-default.xml} (82%)

diff --git a/tests/qemuxml2argvdata/hugepages.args b/tests/qemuxml2argvdata/hugepages-default.args
similarity index 82%
rename from tests/qemuxml2argvdata/hugepages.args
rename to tests/qemuxml2argvdata/hugepages-default.args
index ea61ba930e..115da3ea35 100644
--- a/tests/qemuxml2argvdata/hugepages.args
+++ b/tests/qemuxml2argvdata/hugepages-default.args
@@ -24,6 +24,4 @@ server,nowait \
 -no-acpi \
 -boot c \
 -usb \
--drive file=/dev/HostVG/QEMUGuest1,format=raw,if=none,id=drive-ide0-0-0 \
--device ide-drive,bus=ide.0,unit=0,drive=drive-ide0-0-0,id=ide0-0-0 \
 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x3
diff --git a/tests/qemuxml2argvdata/hugepages.xml b/tests/qemuxml2argvdata/hugepages-default.xml
similarity index 79%
rename from tests/qemuxml2argvdata/hugepages.xml
rename to tests/qemuxml2argvdata/hugepages-default.xml
index 2e65902f1c..99f53828fe 100644
--- a/tests/qemuxml2argvdata/hugepages.xml
+++ b/tests/qemuxml2argvdata/hugepages-default.xml
@@ -17,11 +17,6 @@
   <on_crash>destroy</on_crash>
   <devices>
     <emulator>/usr/bin/qemu-system-i686</emulator>
-    <disk type='block' device='disk'>
-      <source dev='/dev/HostVG/QEMUGuest1'/>
-      <target dev='hda' bus='ide'/>
-      <address type='drive' controller='0' bus='0' target='0' unit='0'/>
-    </disk>
     <controller type='usb' index='0'/>
     <controller type='ide' index='0'/>
     <controller type='pci' index='0' model='pci-root'/>
diff --git a/tests/qemuxml2argvtest.c b/tests/qemuxml2argvtest.c
index 3cff4ffb5e..01553ada38 100644
--- a/tests/qemuxml2argvtest.c
+++ b/tests/qemuxml2argvtest.c
@@ -945,7 +945,7 @@ mymain(void)
     DO_TEST("pmu-feature", NONE);
     DO_TEST("pmu-feature-off", NONE);
 
-    DO_TEST("hugepages", NONE);
+    DO_TEST("hugepages-default", NONE);
     DO_TEST("hugepages-numa",
             QEMU_CAPS_PIIX_DISABLE_S3, QEMU_CAPS_PIIX_DISABLE_S4,
             QEMU_CAPS_VIRTIO_SCSI,
diff --git a/tests/qemuxml2xmloutdata/hugepages.xml b/tests/qemuxml2xmloutdata/hugepages-default.xml
similarity index 82%
rename from tests/qemuxml2xmloutdata/hugepages.xml
rename to tests/qemuxml2xmloutdata/hugepages-default.xml
index f78ca95c1b..40043434ee 100644
--- a/tests/qemuxml2xmloutdata/hugepages.xml
+++ b/tests/qemuxml2xmloutdata/hugepages-default.xml
@@ -17,12 +17,6 @@
   <on_crash>destroy</on_crash>
   <devices>
     <emulator>/usr/bin/qemu-system-i686</emulator>
-    <disk type='block' device='disk'>
-      <driver name='qemu' type='raw'/>
-      <source dev='/dev/HostVG/QEMUGuest1'/>
-      <target dev='hda' bus='ide'/>
-      <address type='drive' controller='0' bus='0' target='0' unit='0'/>
-    </disk>
     <controller type='usb' index='0'>
       <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>
     </controller>
diff --git a/tests/qemuxml2xmltest.c b/tests/qemuxml2xmltest.c
index e35644d479..f0cabc422d 100644
--- a/tests/qemuxml2xmltest.c
+++ b/tests/qemuxml2xmltest.c
@@ -330,7 +330,7 @@ mymain(void)
     DO_TEST("pmu-feature", NONE);
     DO_TEST("pmu-feature-off", NONE);
 
-    DO_TEST("hugepages", NONE);
+    DO_TEST("hugepages-default", NONE);
     DO_TEST("hugepages-pages", NONE);
     DO_TEST("hugepages-pages2", NONE);
     DO_TEST("hugepages-pages3", NONE);
-- 
2.18.0

